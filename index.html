<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Evo-Labor</title>
<style>
body { margin:0; padding:0; overflow:hidden; background:#0a0f19; font-family:sans-serif; touch-action:none; }
canvas { display:block; }
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
const U = {
clamp:(v,min,max)=>Math.max(min,Math.min(max,v)),
randInt:(max)=>Math.floor(Math.random()*max),
choice:(a)=>a[Math.floor(Math.random()a.length)]
};
const GEN_NAMES = ["OBERARM", "UNTERARM", "BEIN OBEN", "BEIN UNTEN", "SCHULTER", "HÃœFTE", "ELLBOGEN", "KNIE", "KOPF"];
class DNA {
constructor(genes, mutatedIdx = -1) {
this.genes = [...genes];
this.mutatedIdx = mutatedIdx;
}
clone() { return new DNA(this.genes, this.mutatedIdx); }
mutate() {
const idx = U.randInt(this.genes.length);
this.mutatedIdx = idx;
this.genes[idx] += U.choice([-1, 1]) * 0.65;
this.genes[idx] = U.clamp(this.genes[idx], 0.2, 5);
}
}
class Creature {
constructor(dna) { this.dna = dna; }
draw(ctx, x, y, scale, baseColor) {
const g = this.dna.genes;
const mIdx = this.dna.mutatedIdx;
const highlight = "#ffb400";
ctx.save();
ctx.translate(x, y);
ctx.scale(scale, scale);
ctx.lineCap = "round";
let headSize = 10 + g[8] * 10;
ctx.strokeStyle = (mIdx === 8) ? highlight : baseColor;
ctx.lineWidth = (mIdx === 8) ? 6 : 3;
ctx.beginPath();
ctx.arc(0, -10 - headSize/2, headSize/2, 0, Math.PI2);
ctx.stroke();
ctx.strokeStyle = baseColor;
ctx.lineWidth = 3;
ctx.beginPath(); ctx.moveTo(0,0); ctx.lineTo(0,30); ctx.stroke();
const drawLimb = (sx, sy, ul, ll, ua, la, ids) => {
const isMutated = ids.includes(mIdx);
ctx.strokeStyle = isMutated ? highlight : baseColor;
ctx.lineWidth = isMutated ? 6 : 3;
const ux = sx + Math.sin(ua) * ul;
const uy = sy + Math.cos(ua) * ul;
ctx.beginPath();
ctx.moveTo(sx, sy);
ctx.lineTo(ux, uy);
ctx.lineTo(ux + Math.sin(ua + la) * ll, uy + Math.cos(ua + la) * ll);
ctx.stroke();
};
for (let s of [-1, 1]) {
drawLimb(0, 5, g[0]*12, g[1]*12, g[4]*s, g[6]*s, [0, 1, 4, 6]);
drawLimb(0, 30, g[2]*12, g[3]*12, g[5]*s, g[7]s, [2, 3, 5, 7]);
}
ctx.restore();
}
}
class App {
constructor() {
this.canvas = document.getElementById("canvas");
this.ctx = this.canvas.getContext("2d");
this.generation = 1;
this.lastMutationName = "START";
this.parentDNA = new DNA([2, 1.5, 2.5, 2, 0.4, 0.4, 0.6, 0.3, 0.8]);
this.children = [];
window.addEventListener("resize", () => this.resize());
const handle = (e) => {
const rect = this.canvas.getBoundingClientRect();
const clientX = e.clientX || (e.touches && e.touches[0].clientX);
const clientY = e.clientY || (e.touches && e.touches[0].clientY);
const x = clientX - rect.left;
const y = clientY - rect.top;
this.handleClick(x, y);
};
window.addEventListener("mousedown", handle);
window.addEventListener("touchstart", (e) => { handle(e); e.preventDefault(); }, {passive: false});
this.resize();
this.generateChildren();
this.loop();
}
resize() {
this.canvas.width = window.innerWidth;
this.canvas.height = window.innerHeight;
}
generateChildren() {
this.children = [];
for (let i = 0; i < 8; i++) {
let dna = this.parentDNA.clone();
dna.mutate();
this.children.push(new Creature(dna));
}
}
handleClick(x, y) {
const gridTop = this.canvas.height * 0.45;
if (y < gridTop) return;
const cellW = this.canvas.width / 4;
const cellH = (this.canvas.height - gridTop) / 2;
const col = Math.floor(x / cellW);
const row = Math.floor((y - gridTop) / cellH);
const index = row * 4 + col;
if (this.children[index]) {
this.lastMutationName = GEN_NAMES[this.children[index].dna.mutatedIdx];
this.parentDNA = this.children[index].dna.clone();
this.generation++;
this.generateChildren();
}
}
loop() {
const ctx = this.ctx;
const w = this.canvas.width;
const h = this.canvas.height;
ctx.fillStyle = "#0a0f19";
ctx.fillRect(0, 0, w, h);
ctx.fillStyle = "#141928";
ctx.fillRect(10, 10, w - 20, h * 0.42 - 20);
new Creature(this.parentDNA).draw(ctx, w/2, h0.22, 1.8, "#00ffcc");
ctx.fillStyle = "#00ffcc";
ctx.font = "bold 16px sans-serif";
ctx.textAlign = "left";
ctx.fillText("GEN: " + this.generation, 30, 40);
ctx.fillStyle = "#ffb400";
ctx.font = "12px sans-serif";
ctx.fillText("MUTATION: " + this.lastMutationName, 30, 60);
const gridTop = h * 0.45;
const cellW = w / 4;
const cellH = (h - gridTop) / 2;
for (let i = 0; i < 8; i++) {
const col = i % 4;
const row = Math.floor(i / 4);
const cx = col * cellW + cellW/2;
const cy = gridTop + row * cellH + cellH/2;
ctx.fillStyle = "#1a1f2e";
ctx.fillRect(col * cellW + 5, gridTop + row * cellH + 5, cellW - 10, cellH - 10);
this.children[i].draw(ctx, cx, cy + 10, 0.7, "rgba(200, 200, 220, 0.6)");
ctx.fillStyle = "rgba(255, 180, 0, 0.5)";
ctx.textAlign = "center";
ctx.font = "9px sans-serif";
ctx.fillText(GEN_NAMES[this.children[i].dna.mutatedIdx], cx, gridTop + (row+1) * cellH - 15);
}
requestAnimationFrame(() => this.loop());
}
}
new App();
</script>
</body>
</html>
